import{d as C,C as k,r as F,X as T,a as i,o,c as d,f as e,t as r,D as g,y as I,g as u,e as x,h as V,I as $,p as w,i as D,_ as S,F as f,k as A}from"./index-e23e7f7f.js";import{S as L}from"./SalesRibbon-fcbc7ed6.js";import{B as O}from"./BackButton-5d8a4bdb.js";const E=a=>(w("data-v-e985edab"),a=a(),D(),a),M={class:"cart-item"},Q={class:"cart-item__image"},R=["src"],U={class:"cart-item__info"},X={class:"cart-item__name"},Y={class:"cart-item__price"},j={key:0,class:"old-price"},z=E(()=>e("br",null,null,-1)),G={class:"cart-item__quantity"},H={class:"cart-item__total"},J=C({__name:"CartItem",props:{productId:{type:Number,required:!0},quantity:{type:Number,required:!0}},setup(a){const n=a,c=k(),t=F(null);T(()=>{t.value=c.getProductById(n.productId)});const _=i(()=>{var l;return t.value?(l=t.value.discount)!=null&&l.percent?t.value.price*(1-t.value.discount.percent/100):t.value.price:0}),s=i(()=>n.quantity),q=i(()=>t.value&&_.value*s.value||0),B=async()=>{t.value&&c.removeProduct(t.value.id)},P=async()=>{t.value&&c.addProduct(t.value.id)},N=async()=>{t.value&&c.subtractProduct(t.value.id)};return(l,Z)=>{var p,m,v,h,y,b;return o(),d("div",M,[e("div",Q,[e("img",{src:(p=t.value)==null?void 0:p.image_link,alt:"product.name"},null,8,R)]),e("div",U,[e("h3",X,r((m=t.value)==null?void 0:m.name),1),(v=t.value)!=null&&v.discount&&((h=t.value)==null?void 0:h.discount.end_date)>new Date().toISOString()?(o(),g(L,{key:0,product:t.value},null,8,["product"])):I("",!0),e("p",Y,[(b=(y=t.value)==null?void 0:y.discount)!=null&&b.percent&&t.value.discount.percent>0?(o(),d("span",j,[u(r(t.value.price.toFixed(2))+"$",1),z])):I("",!0),u(r(_.value.toFixed(2))+"$ ",1)]),e("div",G,[u(" QUANTITY : "),e("button",{class:"cart-item__subtract",onClick:N},"-"),u(" "+r(s.value)+" ",1),e("button",{class:"cart-item__add",onClick:P},"+")]),e("p",H,"TOTAL : "+r(q.value.toFixed(2))+"$",1),e("button",{class:"cart-item__remove",onClick:B},[x(V($),{icon:"ph:trash-thin",color:"black",width:"32",height:"32"})])])])}}});const K=S(J,[["__scopeId","data-v-e985edab"]]),W=C({__name:"Cart",setup(a){const n=k(),c=i(()=>n.getCartItems);return(t,_)=>(o(),d(f,null,[x(O,{class:"back-button"}),(o(!0),d(f,null,A(c.value,s=>(o(),g(K,{key:s.productId,"product-id":s.productId,quantity:s.quantity},null,8,["product-id","quantity"]))),128))],64))}});const ct=S(W,[["__scopeId","data-v-661b4928"]]);export{ct as C};
