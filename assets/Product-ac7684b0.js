import{d as h,G as k,o as c,c as i,f as e,t as u,y as _,_ as v,j as C,H as B,e as p,h as b,p as $,i as w,C as D,u as q,a as f,g as S,D as x,F as R,J as A,r as F,K as N,L as U,M as E}from"./index-1c498e02.js";import{B as I}from"./BackButton-ff9767e7.js";import{S as L}from"./SalesRibbon-44f305df.js";const j={class:"img-title-container"},M={class:"img-container"},O=["src"],V={class:"h2-container"},W={class:"share-title"},H={key:0,class:"share-content"},z=h({__name:"ImageTitleContainer",props:{imgUrl:{type:k(String),required:!0},title:{type:k(String),required:!0},description:{type:k(String),required:!0}},setup(o){const n=o;return(s,t)=>(c(),i("div",j,[e("div",M,[e("img",{src:n.imgUrl,alt:"product image"},null,8,O)]),e("div",V,[e("h2",W,u(n.title),1),n.title.length<70?(c(),i("p",H,u(n.description.length>100?n.description.substring(0,100)+"...":n.description),1)):_("",!0)])]))}});const G=v(z,[["__scopeId","data-v-d540147a"]]),J={class:"link-container"},K=["href"],Q=h({__name:"LinkContainer",props:{link:{type:String,required:!0}},setup(o){const n=o,s=C({isCopied:!1,copyStatus:"Copy",backgroundColor:"var(--primary)"}),t=async()=>{navigator.clipboard.writeText(n.link),await new Promise(r=>{s.isCopied=!0,s.copyStatus="Copied",s.backgroundColor="background-color: var(--dark-primary)",setTimeout(()=>{s.isCopied=!1,s.copyStatus="Copy",s.backgroundColor="background-color: var(--primary)",r(!0)},1e3)})};return(r,d)=>(c(),i("div",J,[e("a",{href:n.link},u(n.link),9,K),e("button",{class:"copy-btn",onClick:t,style:B(s.backgroundColor)},u(s.copyStatus),5)]))}});const X=v(Q,[["__scopeId","data-v-eaa94859"]]),P=o=>($("data-v-8e68634d"),o=o(),w(),o),Y={key:0,class:"share-modal-window-container"},Z={class:"share-modal-inner-part-container"},tt=P(()=>e("h2",{class:"share-text"},"Share",-1)),et=P(()=>e("i",{class:"fas fa-times"},null,-1)),ot=[et],st={class:"components-wrapper"},nt=h({__name:"ShareModalWindow",props:{product:{type:Object,required:!0},isShown:{type:Boolean,required:!0}},emits:["toggleShare"],setup(o,{emit:n}){const s=o,t=window.location.href,r=()=>{n("toggleShare")};return(d,m)=>{var g,a,l,y;return s.isShown?(c(),i("div",Y,[e("div",Z,[tt,e("div",{class:"share-exit",onClick:r},ot),e("div",st,[p(G,{class:"img-title-container",imgUrl:(g=o.product)==null?void 0:g.image_link,title:(a=o.product)==null?void 0:a.name,description:(l=o.product)!=null&&l.description?(y=o.product)==null?void 0:y.description:""},null,8,["imgUrl","title","description"]),p(X,{class:"link-container",link:b(t)},null,8,["link"])])])])):_("",!0)}}});const ct=v(nt,[["__scopeId","data-v-8e68634d"]]),T=o=>($("data-v-0d49ea42"),o=o(),w(),o),at={class:"container"},rt={key:0,class:"product"},it={class:"product-image"},dt=["src"],lt={class:"product-description"},ut=T(()=>e("b",null,null,-1)),_t={class:"product-info"},pt={class:"product-name"},ht={class:"product-price"},vt={key:0,class:"old-price"},mt=T(()=>e("br",null,null,-1)),gt={class:"btns"},yt={key:1},kt=h({__name:"Product",props:{product:{type:Object,required:!0}},setup(o){const n=o,s=D();q();const t=f(()=>n.product),r=f(()=>{var a;return t.value?(a=t.value.discount)!=null&&a.percent?t.value.price*(1-t.value.discount.percent/100):t.value.price:0}),d=()=>{m.isShown=!m.isShown},m=C({isShown:!1}),g=a=>{if(a===null)return"";const l=a.split(" ");return l.length<=25?a:`${l.slice(0,25).join(" ")}...`};return(a,l)=>(c(),i(R,null,[p(I,{class:"back-button"}),e("div",at,[t.value?(c(),i("div",rt,[e("div",it,[e("img",{src:t.value.image_link,alt:"product"},null,8,dt),e("p",lt,[ut,S(u(g(t.value.description)),1)])]),t.value.discount&&t.value.discount.percent>0?(c(),x(L,{key:0,product:t.value},null,8,["product"])):_("",!0),e("div",_t,[e("h1",pt,u(t.value.name),1),e("p",ht,[t.value.discount&&t.value.discount.percent>0?(c(),i("span",vt,[S(u(t.value.price.toFixed(2))+"$",1),mt])):_("",!0),S(u(r.value.toFixed(2))+"$ ",1)]),e("div",gt,[e("button",{class:"add-to-cart",onClick:l[0]||(l[0]=y=>b(s).addProduct(t.value.id))},"ADD TO CART"),e("button",{class:"share",onClick:d},"SHARE")])])])):(c(),i("div",yt,"WE CAN'T FIND THE PRODUCT")),p(ct,{product:t.value,isShown:m.isShown,onToggleShare:d},null,8,["product","isShown"])])],64))}});const St=v(kt,[["__scopeId","data-v-0d49ea42"]]),ft={class:"product-container"},Ct=h({__name:"Product",setup(o){const n=A(),s=F(null),t=N();return U(async()=>{const r=Array.isArray(t.params.id)?parseInt(t.params.id[0]):parseInt(t.params.id),d=await E(r);d?s.value=d:n.push("/404")}),(r,d)=>(c(),i("div",ft,[p(I,{class:"back-button"}),s.value?(c(),x(St,{key:0,product:s.value},null,8,["product"])):_("",!0)]))}});const xt=v(Ct,[["__scopeId","data-v-327c0a8b"]]);export{xt as default};
